<!-- Section giới thiệu nhỏ -->
<div class="shop-intro">
    <h2 class="mb-3" >Chào mừng đến với N&Fresh Flowers</h2>
    <p>Khám phá tất cả các sản phẩm hoa tươi, giỏ hoa và cây cảnh nhỏ xinh.
        Chúng tôi đảm bảo mỗi sản phẩm được chăm chút tỉ mỉ, mang đến niềm vui cho bạn.</p>
</div>

<div id="products"> <div class="container mt-5 mb-5">
        {{#if bohoa.length}}
        <h3 class="sub-title">Bó Hoa</h3>
        <div class="product-grid">
            {{#each bohoa}}
                <div class="card-product visible">
                    <img src="/img/{{image}}" alt="{{name}}">
                    <h5>{{name}}</h5>
                    <p class="price">{{formatCurrency price}}₫</p>
                    <button class="btn-add-cart"
                            data-name="{{name}}"
                            data-price="{{price}}"
                            data-img="/img/{{image}}">Thêm vào giỏ</button>
                </div>
            {{/each}}
        </div>
        {{/if}}
        {{#if giohoa.length}}
            <h3 class="sub-title">Giỏ Hoa</h3>
            <div class="product-grid">
                {{#each giohoa}}
                    <div class="card-product visible"> <img src="/img/{{image}}" alt="{{name}}">
                        <h5>{{name}}</h5>
                        <p class="price">{{formatCurrency price}}₫</p>
                        <button class="btn-add-cart"
                                data-name="{{name}}"
                                data-price="{{price}}"
                                data-img="/img/{{image}}">Thêm vào giỏ</button>
                    </div>
                {{/each}}
            </div>
        {{/if}}
</div>

<div id="cart-message">Đã thêm vào giỏ hàng</div>

<script>
    const cartMessage = document.getElementById('cart-message');
    const addButtons = document.querySelectorAll('.btn-add-cart');

    addButtons.forEach(btn => {
        btn.addEventListener('click', () => {
            const product = {
                name: btn.dataset.name,
                price: Number(btn.dataset.price),
                img: btn.dataset.img,
                qty: 1
            };

            let cart = JSON.parse(localStorage.getItem('cart')) || [];

            // Kiểm tra sản phẩm đã có
            const existing = cart.find(item => item.name === product.name && item.img === product.img);

            if (existing) {
                existing.qty += 1;
            } else {
                cart.push(product);
            }

            localStorage.setItem('cart', JSON.stringify(cart));

            // ⭐ Hiện thông báo nhẹ
            cartMessage.style.display = 'block';
            setTimeout(() => {
                cartMessage.style.display = 'none';

                // ⭐ CHUYỂN SANG TRANG GIỎ HÀNG
                window.location.href = "/giohang";
            }, 400); // đợi popup hiển thị 0.4s rồi chuyển
        });
    });
</script>


